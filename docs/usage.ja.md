# 使い方ガイド

HyperkeyHubの機能の完全ガイドです。

## 基本設定

`~/.hammerspoon/init.lua`に追加：

```lua
hs.loadSpoon("HyperkeyHub")
spoon.HyperkeyHub:start()
```

Hammerspoonをリロードして有効化します。

## Hyperキー

Hyperキーは、HyperkeyHubの全機能で使用するコマンドキーです。

**デフォルト:** F19

**カスタマイズ:** 設定を開いて（Hyper + ,）Hyperキーを変更できます。

**F19キーがない場合は？** [Karabiner-Elements](https://karabiner-elements.pqrs.org/)を使ってCaps Lock → F19にリマップすると便利です。

## デフォルトのキーバインディング

すべてのショートカットはHyperキー（デフォルト: F19）がベースです。

### アプリケーションランチャー

| ショートカット | アクション |
|------------|---------|
| `Hyper + F` | Finderを起動/フォーカス |
| `Hyper + S` | Safariを起動/フォーカス |
| `Hyper + T` | ターミナルを起動/フォーカス |

**動作:**
- アプリが起動していない → 起動
- アプリが起動しているが非表示 → 表示
- アプリが表示されているがフォーカスされていない → フォーカス
- アプリがフォーカスされている → 非表示

**アプリの追加:** `Hyper + ,`を押して設定を開き、使用するアプリケーションを設定ください。

### ウィンドウ管理

#### 基本レイアウト

| ショートカット | アクション | 図解 |
|------------|---------|------|
| `Hyper + ←` | 左半分 | `[██    ]` |
| `Hyper + →` | 右半分 | `[    ██]` |
| `Hyper + ↑` | 上半分 | `[██████]`（上） |
| `Hyper + ↓` | 下半分 | `[██████]`（下） |
| `Hyper + M` | 最大化 | `[██████]` |

#### 3分割レイアウト（Shiftキー併用）

| ショートカット | アクション | 図解 |
|------------|---------|------|
| `Hyper + Shift + ←` | 左3分の1 | `[██      ]` |
| `Hyper + Shift + →` | 右3分の1 | `[      ██]` |
| `Hyper + Shift + C` | 中央3分の1 | `[  ████  ]` |

#### 2/3レイアウト（Shiftキー併用）

| ショートカット | アクション | 図解 |
|------------|---------|------|
| `Hyper + Shift + ↑` | 左3分の2 | `[████    ]` |
| `Hyper + Shift + ↓` | 右3分の2 | `[    ████]` |

#### 4分割レイアウト（Cmdキー併用）

| ショートカット | アクション |
|------------|---------|
| `Hyper + Cmd + U` | 左上4分の1 |
| `Hyper + Cmd + I` | 右上4分の1 |
| `Hyper + Cmd + J` | 左下4分の1 |
| `Hyper + Cmd + K` | 右下4分の1 |

### システムアクション

| ショートカット | アクション |
|------------|---------|
| `Hyper + ,` | 設定ウィンドウを開く |
| `Hyper + Shift + H` | Hammerspoonコンソールを開く |
| `Hyper + Shift + R` | Hammerspoon設定をリロード |
| `Hyper + Shift + D` | デバッグモード切り替え（INFO ⇄ DEBUG）|
| `Hyper + Alt + Q` | スクリーンセーバーを起動 |

### ウィンドウ位置の記憶

ウィンドウ位置を保存・復元できます。

| ショートカット | アクション |
|------------|---------|
| `Hyper + Alt + S` | 現在のウィンドウ位置を保存 |
| `Hyper + Alt + R` | 保存したウィンドウ位置を復元 |

**使用例:** 完璧なウィンドウレイアウトを記憶し、外部モニター接続解除後に復元できます。

## 機能

### アプリケーションランチャー

**トグル動作:**
アプリランチャーはアプリの表示状態を賢く処理します：

1. **アプリが起動していない** → アプリを起動
2. **アプリが非表示** → アプリを表示
3. **アプリが表示されているがフォーカスされていない** → フォーカス
4. **アプリがフォーカスされている** → 非表示

このトグル動作により、1つのキー操作でアプリの表示/非表示を簡単に切り替えられます。

### Electron製アプリのサポート

一部のElectron製アプリは標準の`hide()`コマンドに応答しません。HyperkeyHubは自動的にこれらのアプリを検出し、代替方法で処理します。

**サポートされるアプリ:**
- Visual Studio Code
- Slack
- Discord
- その他のElectron製アプリケーション

### ウィンドウ管理

**スムーズなアニメーション:** ウィンドウの移動には滑らかな遷移が含まれます（デフォルト: 0.2秒）。

**マルチモニター対応:** レイアウトは複数のディスプレイで動作し、ウィンドウが現在表示されているスクリーンを使用します。

**スマートな配置:** ウィンドウは画面の境界に対する位置を維持し、モニター間の切り替え時も正確です。

### メニューバー統合

HyperkeyHubがアクティブな時、メニューバーに✧アイコンが表示されます。

**メニューオプション:**
- ⚙️ Settings... - 設定GUIを開く
- About HyperkeyHub - バージョン情報

## ワークフローの例

### 開発環境セットアップ

```lua
-- 開発ワークフロー用の設定
アプリケーション:
- Hyper + C → VSCode
- Hyper + B → ブラウザ
- Hyper + T → ターミナル
- Hyper + D → データベースクライアント

ウィンドウレイアウト:
- Hyper + ← → VSCode（左半分）
- Hyper + → → ブラウザ（右半分）
- Hyper + Cmd + ↓ → ターミナル（下半分）
```

### 執筆/調査セットアップ

```lua
アプリケーション:
- Hyper + W → ワードプロセッサ
- Hyper + B → ブラウザ（調査用）
- Hyper + N → ノートアプリ

ウィンドウレイアウト:
- Hyper + Shift + ← → ノート（左3分の1）
- Hyper + Shift + ↓ → ブラウザ（右3分の2）
- Hyper + M → ワードプロセッサ（最大化）
```

### マルチモニターセットアップ

```lua
# 全モニター接続時に完璧なレイアウトを保存
Hyper + Alt + S

# ラップトップのみで作業
...外出先で作業...

# 帰宅後、モニター再接続
Hyper + Alt + R  # 保存した位置を復元
```

## カスタマイズ

### アプリケーションの追加

**GUI経由（推奨）:**
1. `Hyper + ,`を押す
2. 「Shortcuts」タブに移動
3. Applicationsの下の「+」をクリック
4. 起動中のアプリを選択、またはBundle IDを手動入力
5. キーと修飾キーを選択
6. 「保存」をクリック

**JSON経由:**
`~/.hammerspoon/HyperkeyHub/config.json`を編集：
```json
{
  "applications": {
    "myapp": {
      "key": "m",
      "bundle": "com.example.MyApp",
      "name": "マイアプリ",
      "modifiers": []
    }
  }
}
```

詳細は[設定ガイド](configuration.ja.md)をご参照ください。

### カスタムウィンドウレイアウト

カスタムウィンドウ位置の作成方法については、[設定ガイド - カスタムウィンドウレイアウト](configuration.ja.md#カスタムウィンドウレイアウト)をご参照ください。

### カスタムシステムアクション

カスタム関数の作成方法については、[設定ガイド - カスタムアクションの追加](configuration.ja.md#カスタムアクションの追加)をご参照ください。

## ヒント＆テクニック

### 素早いアプリ切り替え

筋肉記憶を活用するため、アプリに一貫したキーを使用：
- `Hyper + B` → ブラウザ（使用するブラウザに関わらず）
- `Hyper + E` → メールクライアント
- `Hyper + M` → 音楽アプリ

### 修飾キーの組み合わせ

修飾キーを使用すると、競合なしに使用可能なショートカットを拡張できます：
- `Hyper + A` → アプリ1
- `Hyper + Shift + A` → アプリ2
- `Hyper + Cmd + A` → アプリ3

### ウィンドウスナップショット

レイアウトを大きく変更する前に：
1. `Hyper + Alt + S` → 現在のレイアウトを保存
2. 新しい配置を試す
3. `Hyper + Alt + R` → 必要に応じて復元

### デバッグモード

トラブルシューティングのためにデバッグログを有効化：
1. `Hyper + Shift + D` → デバッグモードを切り替え
2. `Hyper + Shift + H` → コンソールを開いてログを確認
3. 問題を再現
4. `Hyper + Shift + D` → デバッグモードを無効化

## キーボードショートカット早見表

すべてのデフォルトバインディングの早見表：

| カテゴリ | ショートカット | アクション |
|---------|------------|---------|
| **アプリ** | `Hyper + F/S/T` | Finder/Safari/ターミナル |
| **ウィンドウ** | `Hyper + ←/→/↑/↓` | 半分レイアウト |
| **ウィンドウ** | `Hyper + M` | 最大化 |
| **ウィンドウ** | `Hyper + Shift + ←/→` | 左/右3分の1 |
| **ウィンドウ** | `Hyper + Shift + ↑/↓` | 2/3分割 |
| **ウィンドウ** | `Hyper + Shift + C` | 中央3分の1 |
| **ウィンドウ** | `Hyper + Cmd + U/I/J/K` | 4分割 |
| **システム** | `Hyper + ,` | 設定 |
| **システム** | `Hyper + Shift + H` | コンソール |
| **システム** | `Hyper + Shift + R` | リロード |
| **システム** | `Hyper + Shift + D` | デバッグ切り替え |
| **システム** | `Hyper + Alt + Q` | スクリーンセーバー |
| **記憶** | `Hyper + Alt + S/R` | 位置保存/復元 |

## 次のステップ

- [設定ガイド](configuration.ja.md) - セットアップをカスタマイズ
- [トラブルシューティング](troubleshooting.ja.md) - よくある問題を解決
- [開発ガイド](development.ja.md) - プロジェクトに貢献
